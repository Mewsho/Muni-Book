<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Muni Book - solisitud Libros</title>
    <!-- Bootstrap 5 CDN -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      crossorigin="anonymous"
    ></script>
    <style>
      body {
        font-family: "Times New Roman", Times, serif;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }
      .container {
        flex-grow: 1;
      }
      .cart-section {
        margin-top: 30px;
        border: 1px solid #ddd;
        padding: 20px;
        border-radius: 10px;
        background-color: #f9f9f9;
      }
      /* Botón de confirmación */
      .confirm-btn {
        background-color: #28a745;
        color: #fff;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
      }

      .confirm-btn:hover {
        background-color: #218838;
      }
      /* Botón de eliminar libro */
      .remove-btn {
        color: #ff4d4d;
        border: none;
        background-color: transparent;
      }

      .remove-btn:hover {
        color: #fff;
        background-color: #ff4d4d;
        border-radius: 4px;
      }
      footer {
        background-color: #000;
        color: #fff;
        padding: 20px 0;
      }

      .hero-section {
        background-color: #f8f9fa;
        padding: 4rem 0;
      }

      .features-section {
        padding: 4rem 0;
      }

      .display-4 {
        font-size: 1000%;
        font-family: "Times New Roman", Times, serif;
      }

      .nav-link {
        align-items: center;
        font-family: "Times New Roman", Times, serif;
        align-content: center;
        text-align: end;
      }
    </style>
  </head>
  <body>
    <!-- Header Section -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container">
        <a class="navbar-brand" href="/Pages/index.html">
          <svg
            width="30"
            height="30"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <rect width="24" height="24" fill="white" />
            <path d="M4 4H20V20H4V4Z" stroke="black" stroke-width="2" />
            <path d="M8 8H16V16H8V8Z" stroke="black" stroke-width="2" />
          </svg>
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="#products">Productos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#solutions">Soluciones</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#community">Comunidad</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#contact">Contacto</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="perfilusuario.html">perfil</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Shopping Cart Section -->
    <div class="container cart-section">
      <div class="row">
        <!-- Lista de libros (span 8) -->
        <div class="col-md-8">
          <h3>Lista de Libros</h3>
          <ul class="list-group mb-3">
            <li
              class="list-group-item d-flex justify-content-between align-items-center"
            >
              Libro 1
              <div>
                <button
                  class="btn btn-outline-secondary btn-sm"
                  onclick="updateQuantity('book1', -1)"
                >
                  -
                </button>
                <span id="book1" class="mx-2">1</span>
                <button
                  class="btn btn-outline-secondary btn-sm"
                  onclick="updateQuantity('book1', 1)"
                >
                  +
                </button>
              </div>
            </li>
            <li
              class="list-group-item d-flex justify-content-between align-items-center"
            >
              Libro 2
              <div>
                <button
                  class="btn btn-outline-secondary btn-sm"
                  onclick="updateQuantity('book2', -1)"
                >
                  -
                </button>
                <span id="book2" class="mx-2">1</span>
                <button
                  class="btn btn-outline-secondary btn-sm"
                  onclick="updateQuantity('book2', 1)"
                >
                  +
                </button>
              </div>
            </li>
            <li
              class="list-group-item d-flex justify-content-between align-items-center"
            >
              Libro 3
              <div>
                <button
                  class="btn btn-outline-secondary btn-sm"
                  onclick="updateQuantity('book3', -1)"
                >
                  -
                </button>
                <span id="book3" class="mx-2">1</span>
                <button
                  class="btn btn-outline-secondary btn-sm"
                  onclick="updateQuantity('book3', 1)"
                >
                  +
                </button>
              </div>
            </li>
          </ul>
        </div>

        <!-- Opciones de préstamo y detalles (span 4) -->
        <div class="col-md-4">
          <h3>Detalles del Prestamo</h3>

          <div class="mb-3">
            <label for="cantidadLibros" class="form-label"
              >Cantidad Total de Libros</label
            >
            <input
              type="number"
              class="form-control"
              id="cantidadLibros"
              placeholder="0"
              readonly
            />
          </div>

          <div class="mb-3">
            <label class="form-label">Tipo de Prestamo</label>
            <div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="radio"
                  name="tipoPrestamo"
                  id="prestamoSala"
                  value="sala"
                />
                <label class="form-check-label" for="prestamoSala">
                  Prestamo en Sala
                </label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="radio"
                  name="tipoPrestamo"
                  id="prestamoDomicilio"
                  value="domicilio"
                />
                <label class="form-check-label" for="prestamoDomicilio">
                  Prestamo a Domicilio
                </label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="radio"
                  name="tipoPrestamo"
                  id="reserve"
                  value="reserve"
                  onclick="toggleDateBox(true)"
                />
                <label class="form-check-label" for="reserve">Reserva</label>
              </div>
            </div>
          </div>

          <!-- fecha prestamo -->
          <div class="mb-3" id="fechaPrestamoContainer" style="display: none">
            <label for="fechaPrestamo" class="form-label"
              >Fecha de Prestamo</label
            >
            <input
              type="datetime-local"
              class="form-control"
              id="fechaPrestamo"
              onchange="calcularFechaDevolucion()"
            />
          </div>

          <!-- fecha devolucion -->
          <div class="mb-3" id="fechaDevolucionContainer" style="display: none">
            <label for="fechaDevolucion" class="form-label"
              >Fecha de Devolucion</label
            >
            <input
              type="text"
              class="form-control"
              id="fechaDevolucion"
              readonly
            />
          </div>

          <button
            class="btn btn-success w-100 mt-3"
            onclick="confirmarSolisitud()"
          >
            Confirmar solisitud
          </button>
        </div>
      </div>
    </div>

    <!-- Modal de confirmación para eliminar libro -->
    <div
      class="modal fade"
      id="deleteConfirmModal"
      tabindex="-1"
      aria-labelledby="deleteConfirmModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="deleteConfirmModalLabel">
              Eliminar Libro
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            ¿Está seguro de que desea eliminar este libro de la lista?
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cancelar
            </button>
            <button
              type="button"
              class="btn btn-danger"
              id="confirmDeleteButton"
              data-bs-dismiss="modal"
            >
              Eliminar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-light py-4">
      <div class="container">
        <div class="row">
          <div class="col-md-3 mb-3">
            <h5>Muni Book</h5>
            <ul class="list-unstyled">
              <li>Tu libreria de confianza</li>
              <li>Siguenos en redes!</li>
            </ul>
          </div>
          <div class="col-md-3 mb-3">
            <h5>Explorar</h5>
            <ul class="list-unstyled">
              <li><a href="catalogo.html"> Catalogo </a></li>
              <a onclick="loginButton()">Inicia Sesion</a>
            </ul>
          </div>
          <div class="col-md-3 mb-3">
            <h5>Recursos</h5>
            <ul class="list-unstyled">
              <li>Sobre nosotros</li>
              <li>Contactanos</li>
              <li>Atencion al cliente</li>
            </ul>
          </div>
          <div class="col-md-3 mb-3">
            <h5>Siguenos</h5>
            <div class="d-flex">
              <a href="#" class="text-light me-2">
                <i class="fa-brands fa-instagram"></i>
              </a>
              <a href="#" class="text-light me-2">
                <i class="fa-brands fa-facebook"></i>
              </a>
              <a href="#" class="text-light me-2">
                <i class="fa-brands fa-x-twitter"></i>
              </a>
              <a href="#" class="text-light">
                <i class="fa-brands fa-youtube"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script>
      // Función para actualizar la cantidad de libros y la cantidad total
      function updateQuantity(bookId, change) {
        const bookElement = document.getElementById(bookId);
        const rowElement = document.getElementById(bookId + "Row");
        let currentQuantity = parseInt(bookElement.textContent);
        currentQuantity = currentQuantity + change;
        if (currentQuantity <= 0) {
          // Guardar la fila que se debe eliminar y mostrar el modal de confirmación
          rowToDelete = rowElement;
          const deleteConfirmModal = new bootstrap.Modal(
            document.getElementById("deleteConfirmModal")
          );
          deleteConfirmModal.show();
          return; // Salir de la función para no actualizar la cantidad a menos de 1
        }
        bookElement.textContent = currentQuantity;

        updateTotalBooks();
      }

      // Función para actualizar la cantidad total de libros
      function updateTotalBooks() {
        const book1 = parseInt(
          document.getElementById("book1").textContent || 0
        );
        const book2 = parseInt(
          document.getElementById("book2").textContent || 0
        );
        const book3 = parseInt(
          document.getElementById("book3").textContent || 0
        );
        const totalBooks = book1 + book2 + book3;
        document.getElementById("cantidadLibros").value = totalBooks;
      }

      // Función para calcular la fecha de devolución, aproximadamente 2 semanas después de la fecha de préstamo
      function calcularFechaDevolucion() {
        const fechaPrestamo = new Date(
          document.getElementById("fechaPrestamo").value
        );
        if (fechaPrestamo) {
          fechaPrestamo.setDate(fechaPrestamo.getDate() + 14); // Añadir tiempo estimado (14 días)
          document.getElementById("fechaDevolucion").value =
            fechaPrestamo.toLocaleDateString("es-ES");
        }
      }

      // Función para confirmar la reserva (puedes agregar la lógica que desees)
      function confirmarSolisitud() {
        alert("Reserva confirmada. ¡Gracias por utilizar nuestro servicio!");
      }

      // Función para mostrar u ocultar los cuadros de fecha
      function toggleDateBox(show) {
        document.getElementById("fechaPrestamoContainer").style.display = show
          ? "block"
          : "none";
        document.getElementById("fechaDevolucionContainer").style.display = show
          ? "block"
          : "none";
      }

      // Configurar el evento para mostrar/ocultar los cuadros de fecha según el tipo de préstamo
      document
        .querySelectorAll('input[name="tipoPrestamo"]')
        .forEach((radio) => {
          radio.addEventListener("change", function () {
            // Mostrar las fechas solo si el valor seleccionado es "reserve"
            toggleDateBox(this.value === "reserve");
          });
        });
    </script>
  </body>
</html>
